{"version":3,"sources":["../../src/lib/layout/Notify.tsx"],"names":["React","styled","NotificationsActiveIcon","NotificationsNoneIcon","CloseIcon","MoreIcon","CircularProgress","LinearProgress","Popover","Badge","List","ListItem","ListItemIcon","ListItemText","ListItemSecondaryAction","IconButton","Dialog","Slide","DialogTitle","DialogContent","Typography","Toolbar","Grid","Button","Divider","Menu","MenuItem","ScreenSize","Delay","InfiniteScroll","TransitionComponent","props","CloseIconButton","theme","mui","spacing","unit","ListItemWrapper","read","ReadListItem","tfso","colors","notification","palette","action","hover","notificationHover","getNotificateSecondaryText","date","hours","Math","floor","abs","getTime","Date","now","toLocaleDateString","undefined","day","month","year","toLocaleTimeString","hour","minute","NotificationItem","anchor","useRef","useState","menuOpen","state","setState","onMenu","useCallback","callback","event","stopPropagation","onClickAction","secondaryText","useMemo","id","onClick","avatar","children","disablePadding","current","onToggleMarkRead","toggleMarkUnreadTitle","toggleMarkReadTitle","actions","map","i","title","Notifier","_anchorEl","createRef","open","onOpen","onSeen","onClose","renderNotifyer","count","IconProps","renderToolbar","mobile","marginRight","onReadAll","readAllButtonText","renderLoading","loading","renderLoadingMore","loadingMore","horizontal","vertical","renderContent","renderMobile","renderDesktop","PureComponent"],"mappings":"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","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\nimport PropTypes from 'prop-types'\n\nimport NotificationsActiveIcon from '@material-ui/icons/NotificationsActive'\nimport NotificationsNoneIcon from '@material-ui/icons/NotificationsNone'\nimport CloseIcon from '@material-ui/icons/Close'\nimport MoreIcon from '@material-ui/icons/MoreVert'\n\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport LinearProgress from '@material-ui/core/LinearProgress'\nimport Popover from '@material-ui/core/Popover'\nimport Badge from '@material-ui/core/Badge'\nimport List from '@material-ui/core/List'\nimport ListItem, {ListItemProps} from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\nimport IconButton from '@material-ui/core/IconButton'\nimport Dialog from '@material-ui/core/Dialog'\nimport Slide from '@material-ui/core/Slide'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport Typography from '@material-ui/core/Typography'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Grid from '@material-ui/core/Grid'\nimport Button from '@material-ui/core/Button'\nimport Divider from '@material-ui/core/Divider'\nimport Menu from '@material-ui/core/Menu'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport {SvgIconProps} from '@material-ui/core/SvgIcon'\n\nimport ScreenSize from '../ScreenSize'\nimport Delay from '../Delay'\nimport InfiniteScroll from '../InfiniteScroll'\n\nconst TransitionComponent = props => <Slide direction='down' {...props} />\n\nconst CloseIconButton = styled(IconButton)`&&{\n    position: absolute;\n    right: ${({theme}) => theme.mui.spacing.unit}px;\n    top: ${({theme}) => theme.mui.spacing.unit}px;\n}` as typeof IconButton\n\nconst ListItemWrapper = ({read, ...props}: ListItemProps & {read?: boolean}) => <ListItem {...props} />\nconst ReadListItem = styled(ListItemWrapper)`&&{\n    background-color: ${({read, theme}) => read ? 'inherit' : theme.tfso.colors.notification};\n    :hover {\n        background-color: ${({read, theme}) => read ? theme.mui.palette.action.hover : theme.tfso.colors.notificationHover};\n    };\n}`\n\nconst getNotificateSecondaryText = (date: Date) => {\n    const hours = Math.floor(Math.abs(date.getTime() - Date.now()) / 3600000)\n    return hours >= 24\n        ? date.toLocaleDateString(undefined, {day: 'numeric', month: 'long', year: 'numeric'})\n        : date.toLocaleTimeString(undefined, {hour: '2-digit', minute: '2-digit'})\n}\n\nexport type NotificationItemProps = {\n    /**\n     * Unique identifier of the Notification.\n     * Spread to the `ListItem` component.\n     */\n    id: string\n\n    /**\n     * Date when the notification was created.\n     */\n    date: Date\n\n    /**\n     * `true` when the notification has been displayed to the user.\n     */\n    seen?: boolean\n    /**\n     * `true` when the user has marked the notification as read either by:\n     * - marking all notifications as read.\n     * - clicking on the notification.\n     */\n    read?: boolean\n\n    /**\n     * Invoked when the user clicks `Mark as read` or `Mark as unread`.\n     * You should persist the changes on the notification.\n     * (The notification is not changed by this component)\n     */\n    onToggleMarkRead: () => void\n\n    /**\n     * Text to the displayed on the ToggleMarkRead button when the notification is _not_ read\n     */\n    toggleMarkReadTitle: string\n\n    /**\n     * Text to the displayed on the ToggleMarkRead button when the notification _is_ read\n     */\n    toggleMarkUnreadTitle: string\n\n    /**\n     * Callback when the user clicks the notification.\n     * you should set `read` to `true` in this callback before anything else.\n     */\n    onClick: () => void\n\n    /**\n     * Should be either an `<Avatar>`, `<SvgIcon>` or `undefined`\n     */\n    avatar?: React.ReactElement\n\n    /**\n     * <Typography> formatted text, or string\n     */\n    children: React.ReactChild\n\n    /**\n     * Custom actions displayed in a menu when clicking the three vertical dots on the Notification\n     */\n    actions?: Array<{action: () => void, title: string}>\n}\n\nconst NotificationItem = (props: NotificationItemProps) => {\n    const anchor = React.useRef()\n    const [state, setState] = React.useState({menuOpen: false})\n\n    const onMenu = React.useCallback((menuOpen: boolean, callback?: () => void) => (event: React.SyntheticEvent) => {\n        event.stopPropagation()\n        setState({menuOpen})\n        callback && callback()\n    }, [])\n    const onClickAction = React.useCallback((action: () => void) => onMenu(false, action), [onMenu])\n\n    const secondaryText = React.useMemo(() => getNotificateSecondaryText(props.date), [props.date])\n    // const AvatarWrapper = React.useMemo(() => ({children, ...innerProps}) => {\n    //     return props.avatar && props.avatar!.type === 'Avatar'\n    //         ? <ListItemAvatar {...innerProps}>{children}</ListItemAvatar>\n    //         : <ListItemIcon {...innerProps}>{React.cloneElement(children, {style: {fontSize: 40}})}</ListItemIcon>\n    // }, [props.avatar])\n    return (\n        <ReadListItem\n            id={props.id}\n            button\n            onClick={props.onClick}\n            divider\n            read={props.read}\n        >\n            {props.avatar && <ListItemIcon>{props.avatar}</ListItemIcon>}\n            <ListItemText secondary={secondaryText}>\n                {props.children}\n            </ListItemText>\n            <Menu\n                disableAutoFocusItem\n                MenuListProps={{disablePadding: true}}\n                open={state.menuOpen}\n                anchorEl={anchor.current}\n                onClose={onMenu(false)}\n            >\n                <MenuItem onClick={onClickAction(props.onToggleMarkRead)}>{props.read ? props.toggleMarkUnreadTitle : props.toggleMarkReadTitle}</MenuItem>\n                {props.actions && props.actions\n                    .map((action, i) => <MenuItem key={i} onClick={onClickAction(action.action)}>{action.title}</MenuItem>)\n                }\n            </Menu>\n            <ListItemSecondaryAction>\n                <IconButton onClick={onMenu(true)} buttonRef={anchor}>\n                    <MoreIcon fontSize='small'/>\n                </IconButton>\n            </ListItemSecondaryAction>\n        </ReadListItem>\n    )\n}\n\nNotificationItem.propTypes = {\n    id: PropTypes.string.isRequired,\n    date: PropTypes.object.isRequired,\n    seen: PropTypes.bool,\n    read: PropTypes.bool,\n    onClick: PropTypes.func.isRequired,\n    avatar: PropTypes.node,\n    onToggleMarkRead: PropTypes.func.isRequired,\n    toggleMarkReadTitle: PropTypes.string.isRequired,\n    toggleMarkUnreadTitle: PropTypes.string.isRequired,\n    children: PropTypes.node.isRequired,\n    actions: PropTypes.arrayOf(PropTypes.shape({\n        title: PropTypes.string.isRequired,\n        action: PropTypes.func.isRequired\n    }))\n}\n\nexport {NotificationItem}\n\ntype Callback = (() => void) | (() => Promise<void>)\n\nexport type NotifierProps = {\n    /**\n     * Number of new notifications\n     */\n    count: number\n\n    /**\n     * Display a loading indicator for the entire list of notifications\n     */\n    loading?: boolean\n\n    /**\n     * Display a loading indicator at the bottom of the list of notifications, indicating loading of additional notifications\n     */\n    loadingMore?: boolean\n\n    /**\n     * Set to `true` if there are more notifications that could be fetched.\n     */\n    more?: boolean\n\n    /**\n     * Provided your translated value of e.g `Mark all as read`\n     */\n    readAllButtonText: string\n\n    /**\n     * Callback when the user clicked the bell and opens the list of notifications.\n     * You may want to fetch new notifications here.\n     * When the callback returns, the `onSeen` callback will be invoked\n     */\n    onOpen: Callback\n\n    /**\n     * Invoked after `onOpen` returns and the list is still open.\n     * You should mark all notifications as seen here.\n     */\n    onSeen: Callback\n\n    /**\n     * Invoked when the user clicks the `Mark all as read` button\n     * You should set the notifications as read here.\n     */\n    onReadAll: Callback\n\n    /**\n     * Invoked if `more` is `true` and the user scrolled to the end of the list\n     */\n    onLoadMore: (startIndex: number, stopIndex: number) => Promise<void>\n\n    isItemLoaded: (index: number) => boolean\n\n    /**\n     * Invoked when the list is closed.\n     */\n    onClose?: Callback\n\n    /**\n     * Render your notifications here.\n     * The children will be wrapped in a `List`component.\n     * Typically a `NotificationItem`, but anything goes.\n     */\n    children: React.ReactNode\n\n    /**\n     * Properties for the Notification Bell icon\n     */\n    IconProps?: SvgIconProps\n}\n\ntype State = {\n    open: boolean\n}\n\nexport default class Notifier extends React.PureComponent<NotifierProps, State>{\n    static propTypes = {\n        count: PropTypes.number.isRequired,\n        loading: PropTypes.bool,\n        loadingMore: PropTypes.bool,\n        more: PropTypes.bool,\n        readAllButtonText: PropTypes.string.isRequired,\n        onOpen: PropTypes.func.isRequired,\n        onSeen: PropTypes.func.isRequired,\n        onReadAll: PropTypes.func.isRequired,\n        onLoadMore: PropTypes.func.isRequired,\n        onClose: PropTypes.func,\n        children: PropTypes.node.isRequired,\n        IconProps: PropTypes.object,\n    }\n\n    _anchorEl: React.RefObject<HTMLButtonElement> = React.createRef()\n\n    state: State = {\n        open: false\n    }\n\n    onOpen = async () => {\n        const {onOpen, onSeen} = this.props\n        this.setState({open: true})\n        await onOpen()\n        // If the user closed the list while fetching data in the onOpen callback, the list has not been shown yet.\n        this.state.open && onSeen()\n    }\n\n    onClose = () => {\n        this.setState({open: false}, this.props.onClose)\n    }\n\n    renderNotifyer = () => (\n        <IconButton buttonRef={this._anchorEl} onClick={this.onOpen} >\n            {this.props.count > 0\n                ? <Badge color='error' badgeContent={this.props.count} max={9}><NotificationsActiveIcon {...this.props.IconProps} /></Badge>\n                : <NotificationsNoneIcon {...this.props.IconProps} />\n            }\n        </IconButton>\n    )\n\n    renderToolbar = (mobile: boolean) => (\n        <>\n            <Toolbar variant={'dense'} style={{marginRight: mobile ? 32 : 0}}>\n                <Grid container justify='space-between' alignItems='baseline' spacing={8} wrap='nowrap'>\n                    <Grid item xs>\n                        <Typography variant={mobile ? 'subtitle1' : 'subtitle2'} >Notifications</Typography>\n                    </Grid>\n                    <Grid item>\n                        <Button onClick={this.props.onReadAll} variant='text' size='small' color='primary' fullWidth>\n                            {this.props.readAllButtonText}\n                        </Button>\n                    </Grid>\n                </Grid>\n            </Toolbar>\n            <Divider />\n            {this.renderLoading()}\n        </>\n    )\n\n    renderContent(mobile: boolean){\n        return (\n            <InfiniteScroll height={mobile ? undefined : 500} threshold={0.2}>\n                <List dense disablePadding={!mobile}>\n                    {this.props.children}\n                </List>\n            </InfiniteScroll>\n        )\n    }\n\n    renderDesktop(){\n        return (\n            <Popover\n                open={this.state.open}\n                onClose={this.onClose}\n                anchorEl={this._anchorEl.current}\n                anchorOrigin={{horizontal: 'right', vertical: 'bottom'}}\n                transformOrigin={{vertical: 'top', horizontal: 'right'}}\n            >\n                {this.renderToolbar(false)}\n                {this.renderContent(false)}\n                {this.renderLoadingMore()}\n            </Popover>\n        )\n    }\n\n    renderMobile(){\n        return (\n            <Dialog\n                TransitionComponent={TransitionComponent}\n                open={this.state.open}\n                onClose={this.onClose}\n                fullScreen\n                scroll={'paper'}\n            >\n                <DialogTitle disableTypography>\n                    {this.renderToolbar(true)}\n                    <CloseIconButton onClick={this.onClose}><CloseIcon /></CloseIconButton>\n                </DialogTitle>\n                <DialogContent>\n                    {this.renderContent(true)}\n                    {this.renderLoadingMore()}\n                </DialogContent>\n            </Dialog>\n        )\n    }\n\n    renderLoading = () => (\n        this.props.loading ? (\n            <Delay delayMs={200}>\n                <LinearProgress color='secondary' />\n            </Delay>\n        ) : null\n    )\n\n    renderLoadingMore = () => (\n        this.props.loadingMore ? (\n            <Delay delayMs={200}>\n                <CircularProgress color='secondary' />\n            </Delay>\n        ) : null\n    )\n\n    render(){\n        return (\n            <>\n                {this.renderNotifyer()}\n                <ScreenSize>\n                    {({mobile}) => mobile ? this.renderMobile() : this.renderDesktop()}\n                </ScreenSize>\n            </>\n        )\n    }\n}"],"file":"Notify.js"}