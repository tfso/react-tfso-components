{"version":3,"sources":["../src/lib/ListPicker.tsx"],"names":["React","Dialog","DialogContent","Slide","Typography","MenuList","MenuItem","ListItemText","Avatar","SearchField","Popover","styled","IconButton","CloseIcon","ScreenSize","AvatarColor","theme","color","mui","palette","primary","dark","contrastText","CustomDialogTitle","div","TransitionComponent","props","ListPicker","_inputRef","createRef","_listRef","state","filterValue","focusValue","onFilter","event","setState","target","value","onKeyDown","keyCode","current","focus","onSwitch","onClose","onCancel","prevProps","open","setTimeout","renderItems","searchLabel","options","filter","option","label","toLowerCase","indexOf","map","i","disabled","selected","avatarColor","split","slice","words","desktopDialog","anchorEl","vertical","horizontal","mobileDialog","mobile","PureComponent"],"mappings":"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","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport Slide from '@material-ui/core/Slide'\nimport Typography from '@material-ui/core/Typography'\nimport MenuList from '@material-ui/core/MenuList'\nimport MenuItem from '@material-ui/core/MenuItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Avatar from '@material-ui/core/Avatar'\nimport SearchField from './SearchField'\nimport Popover from '@material-ui/core/Popover'\nimport styled from 'styled-components'\nimport IconButton from '@material-ui/core/IconButton'\nimport CloseIcon from '@material-ui/icons/Close'\nimport ScreenSize from './ScreenSize'\n\nexport type ClientSwitcherDialogProps = {\n    open: boolean\n    onCancel: () => void\n    onSwitch: (value: string) => void\n    children?: undefined\n    options: Array<{ value: string, label: string }>\n    cancelButtonText: string\n    searchLabel?: string\n    anchorEl?: null | HTMLElement\n    disabled?: string\n    selected?: string\n    avatarColor?: string\n}\n\ntype State = {\n    filterValue: string,\n    focusValue: string\n}\n\nconst AvatarColor = styled(Avatar)`\n  &&{\n    background-color: ${({theme, color}) => color || theme.mui.palette.primary.dark}\n    color: ${({theme}) => theme.mui.palette.primary.contrastText}\n  }\n` as typeof Avatar\n\nconst CustomDialogTitle = styled.div`\n  display: flex;\n  flex-flow: row-reverse;\n  padding: 5px;\n`\n\nconst TransitionComponent = props => <Slide direction='down' {...props} />\n\nexport default class ListPicker extends React.PureComponent<ClientSwitcherDialogProps, State>{\n    static propTypes = {\n        open: PropTypes.bool.isRequired,\n        onCancel: PropTypes.func.isRequired,\n        onSwitch: PropTypes.func.isRequired,\n        options: PropTypes.arrayOf(PropTypes.shape({value: PropTypes.string.isRequired, label: PropTypes.string.isRequired})).isRequired,\n        cancelButtonText: PropTypes.string.isRequired,\n        searchLabel: PropTypes.string,\n        disabled: PropTypes.string,\n        selected: PropTypes.string,\n        avatarColor: PropTypes.string\n    }\n    _inputRef: React.RefObject<HTMLLIElement> = React.createRef()\n    _listRef: React.RefObject<HTMLInputElement> = React.createRef()\n    state: State = {\n        filterValue: '',\n        focusValue: ''\n    }\n\n    componentDidUpdate(prevProps){\n        if(!prevProps.open && this.props.open){\n            setTimeout(() => {\n                this._inputRef.current && this._inputRef.current.focus()\n            }, 1)\n        }\n    }\n\n    onFilter = (event: React.ChangeEvent<HTMLInputElement>) => {\n        this.setState({filterValue: event.target.value})\n    }\n    onKeyDown = (event: React.KeyboardEvent) => {\n        if(!(event && event.keyCode === 40)){\n            return\n        }\n        this._listRef.current && this._listRef.current.focus()\n    }\n\n    onSwitch = (value) => {\n        this.props.onSwitch(value)\n    }\n\n    onClose = () => {\n        this.props.onCancel()\n    }\n\n    render(){\n        const renderItems = (\n            <>\n                <SearchField\n                    placeholder={this.props.searchLabel}\n                    inputRef={this._inputRef}\n                    onChange={this.onFilter}\n                    value={this.state.filterValue}\n                    onKeyDown={this.onKeyDown}\n                />\n                <MenuList>\n                    { this.props.options\n                        .filter(option => option.label.toLowerCase().indexOf(this.state.filterValue) > -1 || option.value.indexOf(this.state.filterValue) > -1)\n                        .map((option, i) => (\n                            <MenuItem\n                                disabled={option.value == this.props.disabled}\n                                selected={option.value == this.props.selected}\n                                key={i}\n                                onClick={() => { this.onSwitch(option.value) }}\n                            >\n                                <AvatarColor color={this.props.avatarColor}>\n                                    <Typography variant='caption' color='inherit'>\n                                        {option.label.split(' ')\n                                            .slice(0, 3)\n                                            .map((words) => (\n                                                words[0]\n                                            ))\n                                        }\n                                    </Typography>\n                                </AvatarColor>\n                                <ListItemText primary={option.label} />\n                            </MenuItem>\n                        ))\n                    }\n                </MenuList>\n            </>\n        )\n\n        const desktopDialog = (\n            <Popover\n                anchorEl={this.props.anchorEl}\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left',\n                }}\n                transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'left',\n                }}\n                open={this.props.open}\n                onClose={this.onClose}\n            >\n                <DialogContent>\n                    {renderItems}\n                </DialogContent>\n            </Popover>\n        )\n\n        const mobileDialog = (\n            <Dialog\n                TransitionComponent={TransitionComponent}\n                keepMounted={false}\n                fullScreen={true}\n                open={this.props.open}\n                onClose={this.onClose}\n                fullWidth\n                maxWidth='sm'\n            >\n                <CustomDialogTitle>\n                    <IconButton onClick={this.props.onCancel} aria-label=\"Close\">\n                        <CloseIcon />\n                    </IconButton>\n                </CustomDialogTitle>\n                <DialogContent>\n                    {renderItems}\n                </DialogContent>\n            </Dialog>\n        )\n\n        return (\n            <ScreenSize>\n                {({mobile}) => mobile ? mobileDialog : desktopDialog}\n            </ScreenSize>\n        )\n    }\n}"],"file":"ListPicker.js"}